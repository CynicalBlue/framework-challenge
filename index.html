<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kimeiga/bahunya/dist/bahunya.min.css">
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Casual Restaurant — Payment</title>
    <link rel="stylesheet" href="screen.css" />
    <style>
      /* Basic layout for the payment UI */
      body { max-width: 980px; margin: 28px auto; padding: 0 16px; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
      header { display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px; }
      nav ul { display:flex; gap:12px; list-style:none; padding:0; margin:0; }
      main { display:grid; grid-template-columns: 1fr 360px; gap:20px; align-items:start; }
      .menu { border:1px solid #e6e6e6; padding:16px; border-radius:8px; background:#fff; }
      .menu-item { display:flex; justify-content:space-between; gap:12px; padding:8px 0; border-bottom:1px dashed #f0f0f0; }
      .menu-item:last-child { border-bottom: none; }
      .menu-item .meta { display:flex; gap:12px; align-items:center; }
      .menu-item button { padding:6px 10px; }
      .cart { border:1px solid #e6e6e6; padding:16px; border-radius:8px; background:#fff; position:relative; }
      .cart-list { max-height:260px; overflow:auto; margin-bottom:12px; }
      .cart-row { display:flex; justify-content:space-between; gap:8px; padding:6px 0; border-bottom:1px solid #f4f4f4; align-items:center; }
      .cart-row:last-child { border-bottom:none; }
      .qty { display:flex; gap:6px; align-items:center; }
      .summary { margin-top:12px; font-weight:600; }
      .pay-form { margin-top:12px; display:flex; flex-direction:column; gap:8px; }
      input[type="text"], input[type="number"], select { padding:8px; border:1px solid #ddd; border-radius:6px; width:100%; }
      .btn-pay { background:#0b74de; color:#fff; border:none; padding:10px 12px; border-radius:6px; cursor:pointer; font-weight:600; }
      .btn-pay[disabled] { opacity:0.6; cursor:not-allowed; }
      .receipt { background:#f8fffb; border:1px solid #e6f7ec; padding:12px; border-radius:6px; margin-top:12px; display:none; }
      .small { font-size:0.9rem; color:#555; }
      footer { margin-top:22px; text-align:center; color:#666; font-size:0.9rem; }
    </style>
  </head>
  <body>
    <header>
      <div>
        <h1>Casual Restaurant</h1>
        <p class="small">Quick order and pay</p>
      </div>
      <nav>
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="about.html">About</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section class="menu" id="menu">
        <h2>Menu</h2>
        <div id="menu-items" aria-live="polite"></div>
      </section>

      <aside class="cart" id="cart">
        <h2>Your Order</h2>
        <div class="cart-list" id="cart-list">
          <p class="small">No items yet — add something from the menu.</p>
        </div>

        <div>
          <label class="small">Tip</label>
          <select id="tip">
            <option value="0">No tip</option>
            <option value="0.1">10%</option>
            <option value="0.15" selected>15%</option>
            <option value="0.2">20%</option>
            <option value="custom">Custom</option>
          </select>
          <input id="tip-custom" type="number" min="0" step="0.5" placeholder="Custom tip $ (optional)" style="display:none; margin-top:8px;" />
        </div>

        <div class="summary" id="summary">
          <div>Subtotal: <span id="subtotal">$0.00</span></div>
          <div>Tip: <span id="tip-amt">$0.00</span></div>
          <div>Total: <span id="total">$0.00</span></div>
        </div>

        <form id="pay-form" class="pay-form" onsubmit="return false;">
          <label class="small">Name on receipt</label>
          <input id="cust-name" type="text" placeholder="Jane Doe" required />

          <label class="small">Card number</label>
          <input id="card-number" type="text" inputmode="numeric" placeholder="4242 4242 4242 4242" maxlength="19" />

          <div style="display:flex; gap:8px;">
            <div style="flex:1;">
              <label class="small">Expiry</label>
              <input id="card-exp" type="text" placeholder="MM/YY" maxlength="5" />
            </div>
            <div style="width:110px;">
              <label class="small">CVC</label>
              <input id="card-cvc" type="text" maxlength="4" />
            </div>
          </div>

          <button id="pay" class="btn-pay" type="button">Pay</button>
        </form>

        <div class="receipt" id="receipt" role="status" aria-live="polite"></div>
      </aside>
    </main>

    <footer>
      Built for quick dine-in payments • Demo only — no real payments processed
    </footer>

    <script>
      // Basic menu dataset
      const MENU = [
        { id: 'b1', name: 'Classic Burger', desc: 'Beef patty, lettuce, tomato, house sauce', price: 10.5 },
        { id: 'b2', name: 'Crispy Chicken Sandwich', desc: 'Buttermilk fried chicken, slaw', price: 11.0 },
        { id: 's1', name: 'Caesar Salad', desc: 'Romaine, parmesan, croutons', price: 8.0 },
        { id: 's2', name: 'Fries (Large)', desc: 'Crispy salted fries', price: 4.0 },
        { id: 'd1', name: 'Chocolate Brownie', desc: 'Warm brownie, vanilla ice cream', price: 5.5 }
      ];

      const menuEl = document.getElementById('menu-items');
      const cartList = document.getElementById('cart-list');
      const subtotalEl = document.getElementById('subtotal');
      const tipSelect = document.getElementById('tip');
      const tipCustom = document.getElementById('tip-custom');
      const tipAmtEl = document.getElementById('tip-amt');
      const totalEl = document.getElementById('total');
      const payBtn = document.getElementById('pay');
      const receiptEl = document.getElementById('receipt');
      const nameEl = document.getElementById('cust-name');

      let cart = {};

      function money(v){ return '$' + v.toFixed(2); }

      function renderMenu(){
        menuEl.innerHTML = '';
        MENU.forEach(item => {
          const row = document.createElement('div');
          row.className = 'menu-item';
          row.innerHTML = `
            <div class="meta">
              <div>
                <div style="font-weight:600">${item.name}</div>
                <div class="small">${item.desc}</div>
              </div>
              <div style="min-width:72px; text-align:right; font-weight:600">${money(item.price)}</div>
            </div>
            <div>
              <button data-id="${item.id}">Add</button>
            </div>
          `;
          row.querySelector('button').addEventListener('click', () => addToCart(item));
          menuEl.appendChild(row);
        });
      }

      function addToCart(item){
        cart[item.id] = cart[item.id] || { ...item, qty:0 };
        cart[item.id].qty += 1;
        renderCart();
      }

      function removeFromCart(id){
        delete cart[id];
        renderCart();
      }

      function changeQty(id, delta){
        if(!cart[id]) return;
        cart[id].qty = Math.max(0, cart[id].qty + delta);
        if(cart[id].qty === 0) removeFromCart(id);
        renderCart();
      }

      function calculateTotals(){
        const items = Object.values(cart);
        const subtotal = items.reduce((s,it)=> s + it.price * it.qty, 0);
        let tipVal = 0;
        const tipOpt = tipSelect.value;
        if(tipOpt === 'custom'){
          tipVal = parseFloat(tipCustom.value || 0);
        } else {
          tipVal = subtotal * parseFloat(tipOpt || 0);
        }
        const total = subtotal + tipVal;
        return { subtotal, tipVal, total };
      }

      function renderCart(){
        const items = Object.values(cart);
        cartList.innerHTML = '';
        if(items.length === 0){
          cartList.innerHTML = '<p class="small">No items yet — add something from the menu.</p>';
        } else {
          items.forEach(it => {
            const row = document.createElement('div');
            row.className = 'cart-row';
            row.innerHTML = `
              <div style="flex:1">
                <div style="font-weight:600">${it.name}</div>
                <div class="small">${money(it.price)} each</div>
              </div>
              <div style="width:140px; text-align:right;">
                <div class="qty">
                  <button data-action="dec" aria-label="decrease">−</button>
                  <div style="min-width:30px; text-align:center;">${it.qty}</div>
                  <button data-action="inc" aria-label="increase">+</button>
                </div>
                <div class="small" style="margin-top:6px;">${money(it.price * it.qty)}</div>
                <div style="margin-top:6px;"><button data-action="remove" class="small">Remove</button></div>
              </div>
            `;
            row.querySelector('[data-action="inc"]').addEventListener('click', ()=> changeQty(it.id, 1));
            row.querySelector('[data-action="dec"]').addEventListener('click', ()=> changeQty(it.id, -1));
            row.querySelector('[data-action="remove"]').addEventListener('click', ()=> removeFromCart(it.id));
            cartList.appendChild(row);
          });
        }
        updateSummary();
      }

      function updateSummary(){
        const totals = calculateTotals();
        subtotalEl.textContent = money(totals.subtotal);
        tipAmtEl.textContent = money(totals.tipVal);
        totalEl.textContent = money(totals.total);
      }

      tipSelect.addEventListener('change', ()=>{
        tipCustom.style.display = tipSelect.value === 'custom' ? 'block' : 'none';
        updateSummary();
      });
      tipCustom.addEventListener('input', updateSummary);

      payBtn.addEventListener('click', async () => {
        const totals = calculateTotals();
        if(totals.total <= 0){
          alert('Please add items to your order before paying.');
          return;
        }
        payBtn.disabled = true;
        payBtn.textContent = 'Processing…';

        // Simulate processing
        await new Promise(r => setTimeout(r, 1400));

        // Very basic validation (demo only)
        const customer = nameEl.value.trim() || 'Guest';
        const receipt = {
          id: 'RCPT' + Date.now().toString().slice(-6),
          name: customer,
          items: Object.values(cart).map(it => ({ name: it.name, qty: it.qty, line: (it.price * it.qty) })),
          subtotal: totals.subtotal,
          tip: totals.tipVal,
          total: totals.total,
          time: new Date().toLocaleString()
        };

        showReceipt(receipt);
        // clear cart
        cart = {};
        renderCart();
        payBtn.disabled = false;
        payBtn.textContent = 'Pay';
      });

      function showReceipt(r){
        receiptEl.style.display = 'block';
        receiptEl.innerHTML = `
          <div style="font-weight:700; margin-bottom:6px;">Payment received — ${r.id}</div>
          <div class="small">Name: ${r.name}</div>
          <div class="small">Time: ${r.time}</div>
          <div style="margin-top:8px; font-weight:600;">Items</div>
          <div class="small" style="margin-top:6px;">
            ${r.items.map(it => `${it.qty} × ${it.name} — ${money(it.line)}`).join('<br/>')}
          </div>
          <div style="margin-top:8px;">Subtotal: ${money(r.subtotal)}</div>
          <div>Tip: ${money(r.tip)}</div>
          <div style="font-weight:700; margin-top:6px;">Total: ${money(r.total)}</div>
          <div style="margin-top:10px;" class="small">Thank you! This is a demo receipt — no real transaction occurred.</div>
        `;
        // scroll to receipt
        receiptEl.scrollIntoView({ behavior: 'smooth' });
      }

      // Initial render
      renderMenu();
      renderCart();
    </script>
  </body>
</html>